---
title: "Demographic Factsheet"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: scroll
params:
  demography_table: NULL
  district_df: NULL
#classoption: 
  #landscape
  #a3paper
---

<style>

body {
  padding-top:0px
}

.navbar{
  visibility: hidden
}

</style>

<style>
.datatables{
    overflow: auto;
}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)#, fig.align="center")
```


```{r}
party <- paste("(", substr(params$district_df$"Party Affiliation", 1, 1), ")", sep = "")
rep <- params$district_df$"Representative"
rep <- paste(rep, party, sep= " ")
```


Row
-------------------------------------
###

```{r}
valueBox(sprintf('Demographic Info: %s', params$district_df$District), color = 'maroon') 
```

Row
-------------------------------------
### 
```{r}
#valid colors can be found at https://www.rdocumentation.org/packages/shinydashboard/versions/0.7.1/topics/validColors
valueBox(params$district_df$'Mexican Population', caption = "Mexican-American Population", icon="fa-male", color='maroon')

```

###
```{r}
valueBox(rep, caption = "Representative", color='maroon')
```

### 
```{r}
valueBox(paste(params$district_df$'Percent Mexican', '%'), caption = "Share of Population, Mexican-American", color='maroon')
```
    

Row
-------------------------------------

###
```{r}
knitr::include_graphics(sprintf("../Data/Maps Mexican Population/%s.png", params$district_df$State))
```

###
```{r}
knitr::include_graphics("../Data/USA_maps/USA_Mexican Population.png")
```


Row
-------------------------------------
    
```{r}
rows <- nrow(params$demography_table)
table_size <- paste(toString(39 * rows), 'px', sep='')

if (rows == 1) {datatable(
  params$demography_table, options = list(dom = 't',
                              scrollY = table_size,
                              columnDefs = list(list(className = 'dt-center', targets = "_all")),
                              initComplete = JS(
    "function(settings, json) {",
    "$(this.api().table().header()).css({'background-color': '#8B0000', 'color': '#fff'});",
    "}")
)
  )
} else {datatable(
  params$demography_table, options = list(dom = 't',
                              scrollY = table_size,
                              pageLength = 53,
                              autoLength= FALSE,
                              columnDefs = list(list(className = 'dt-center', targets = "_all")),
                              initComplete = JS(
    "function(settings, json) {",
    "$(this.api().table().header()).css({'background-color': '#8B0000', 'color': '#fff'});",
    "}")
)
  )  %>%
  formatStyle(
  'District',
  target = 'row', 
  backgroundColor = styleEqual(
    c(toString(params$district_df$District)), c('lightgray'))
  )
}

```



