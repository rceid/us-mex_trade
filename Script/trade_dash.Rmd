---
title: "Trade Factsheet"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: scroll
params:
  trade_table: NULL
  district_df: NULL
#classoption: 
  #landscape
  #a3paper
---

<style>

body {
  padding-top:0px
}

.navbar{
  visibility: hidden
}

</style>

<style>
.datatables{
    overflow: auto;
}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)#, fig.align="center")
```


```{r}
party <- paste("(", substr(params$district_df$"Party Affiliation", 1, 1), ")", sep = "")
rep <- params$district_df$"Representative"
rep <- paste(rep, party, sep= " ")
```


Row
-------------------------------------
###

```{r}
valueBox(sprintf('Trade Info: %s', params$district_df$District), color = 'maroon') 
```

Row
-------------------------------------
### 
```{r}
#valid colors can be found at https://www.rdocumentation.org/packages/shinydashboard/versions/0.7.1/topics/validColors
valueBox(params$district_df$'Exports to Mexico 2018 (USD Million)', caption = "Exports to Mexico, 2018 (USD Million)", color='maroon')

```

###
```{r}
valueBox(rep, caption = "Representative", color='maroon')#, icon='fa-republican')
```

### 
```{r}
valueBox(params$district_df$'Total Jobs 2018', caption = "Jobs Generated by Mexican Companies, 2018", color='maroon')
```
    

Row
-------------------------------------

###
```{r}
if (is.na(params$district_df$'Exports to Mexico 2018 (USD Million)')){
  valueBox(sprintf("No Maps available for Exports to Mexico in %s", params$district_df$District), color='maroon')
} else {
  knitr::include_graphics(sprintf("../Data/Maps Exports to Mexico, 2018 (USD Million)/%s.png", params$district_df$State))
}

```

###
```{r}
if (is.na(params$district_df$'Total Jobs 2018')){
  valueBox( sprintf("No Maps available for Total Jobs, 2018 in %s", params$district_df$District), color='maroon')
} else {
  knitr::include_graphics(sprintf("../Data/Maps Total Jobs, 2018/%s.png", params$district_df$State))
}
```


Row
-------------------------------------
  
### Trade Stats
    
```{r}
rows <- nrow(params$trade_table)
table_size <- paste(toString(39 * rows), 'px', sep='')

if (rows == 1) {datatable(
  params$trade_table, options = list(dom = 't',
                              scrollY = table_size,
                              columnDefs = list(list(className = 'dt-center', targets = "_all")),
                              initComplete = JS(
    "function(settings, json) {",
    "$(this.api().table().header()).css({'background-color': '#8B0000', 'color': '#fff'});",
    "}")
)
  )
} else {datatable(
  params$trade_table, options = list(dom = 't',
                              scrollY = table_size,
                              pageLength = 53,
                              autoLength= FALSE,
                              columnDefs = list(list(className = 'dt-center', targets = "_all")),
                              initComplete = JS(
    "function(settings, json) {",
    "$(this.api().table().header()).css({'background-color': '#8B0000', 'color': '#fff'});",
    "}")
)
  )  %>%
  formatStyle(
  'District',
  target = 'row', 
  backgroundColor = styleEqual(
    c(toString(params$district_df$District)), c('lightgray'))
  )
}

```



